<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Simon</title>
	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="CSS/main.css" >
	<!-- JS -->
	<script src="../JS/jquery-3.5.1.js"></script>

</head>
<body>
	<div class="main">
		<div class="level"> 

		</div>
		<div class="ko">
			
		</div>
		<div>
			<button class="button b1 btn" id="1">
				RED
			</button>
			<button class="button b2 btn" id="2">
				BLUE
			</button>
			<br>
			<button class="button b3 btn" id="3">
				GREEN
			</button>
			<button class="button b4 btn" id="4">
				YELLOW
			</button>
		</div>
		<button class="button b0" onclick="starting()" id="">PRESS TO START </button>

	</div>
		<script type="text/javascript">
		var x;
		var y;
		y=[];
		x=[];
		var level;
		level=0;
		function nextsequence(){
			$(".ko").html("");
			$(".b0").html("PRESS TO STOP");
			y=[];
			$(".level").html("LEVEL "+level);
			x.push(Math.floor(Math.random() *4)+1);
			$(".b" + x[level]).addClass("pressed");
   			setTimeout(function () {
   				$(".button").removeClass("pressed");}, 1000);
   			$("body").addClass("bg-pressed");
   			setTimeout(function () {
   				$("body").removeClass("bg-pressed");}, 1000);
   			console.log(x[level]);
			level++;
		};
		var ingame;
		ingame=false;
		function starting(){
			if(ingame){
				stoping();
				ingame=false;
			}
			else{
				nextsequence();
				ingame=true;
			}
		}
		function stoping(){
				$(".b0").html("PRESS TO START");
				$(".level").html("");
				x=[];
				level=0;
		};
		function checksequence(l){
			if (x[l] == y[l]) {
		    	if (x.length == y.length){
		        	setTimeout(function () {
		          		nextsequence();
		        	}, 1000);
		      	}
		    } 
		    else {
		    	y=[];
		    	$("body").addClass("bg-pressed");
   			setTimeout(function () {
   				$("body").removeClass("bg-pressed");}, 100);
		      	$(".ko").html("Game Over");
      			stoping();
    		}
		};
		$(".btn").click(function(){
			var userChosenColour = $(this).attr("id");
  			y.push(userChosenColour);
  			checksequence(y.length-1);
		});

	</script>

</body>
</html>